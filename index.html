<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Web3å¤§èˆªæµ· - èšåˆæŠ•ç ”å·¥å…·å¹³å°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âš“</text></svg>">
  <script>
    (function(){
      try{
        const rm = function(){ document.querySelectorAll('script[src*="evmAsk.js"]').forEach(el=>el.remove()); };
        rm();
        const mo = new MutationObserver(rm);
        mo.observe(document.documentElement, { childList:true, subtree:true });
      }catch(e){}
    })();
  </script>
  <style>
    :root { --bg-app:#020617; --bg-card:#1e293b; --bg-sidebar:#0f172a; --text-main:#f1f5f9; --text-muted:#94a3b8; --accent:#38bdf8; --accent-hover:#0ea5e9; --border:#334155; --radius-md:8px; --radius-lg:12px }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:var(--bg-app);color:var(--text-main);min-height:100vh;line-height:1.6}
    .container{max-width:1200px;margin:0 auto;padding:0 20px}
    .navbar{background:var(--bg-sidebar);border-bottom:1px solid var(--border);padding:1rem 0;position:sticky;top:0;z-index:100}
    .nav-content{display:flex;justify-content:space-between;align-items:center}
    .logo{display:flex;align-items:center;gap:12px;font-size:1.5rem;font-weight:700;color:var(--text-main)}
    .logo-dot{width:10px;height:10px;background:var(--accent);border-radius:50%;box-shadow:0 0 12px var(--accent)}
    .nav-actions{display:flex;gap:1rem;align-items:center}
    .btn{padding:.5rem 1rem;border-radius:var(--radius-md);border:1px solid var(--border);background:var(--bg-card);color:var(--text-main);text-decoration:none;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:.5rem}
    .btn:hover{border-color:var(--accent);color:var(--accent)}
    .btn-primary{background:var(--accent);border-color:var(--accent);color:#0b1120}
    .btn-primary:hover{background:var(--accent-hover);color:#000}
    .hero{padding:4rem 0;text-align:center;background:radial-gradient(circle at top right,#1e293b 0%,#020617 40%)}
    .hero h1{font-size:3rem;font-weight:700;margin-bottom:1rem;background:linear-gradient(135deg,var(--accent),#a855f7);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .hero p{font-size:1.2rem;color:var(--text-muted);max-width:600px;margin:0 auto 2rem}
    .tools-section{padding:4rem 0}
    .section-title{font-size:2rem;font-weight:700;text-align:center;margin-bottom:3rem;color:var(--text-main)}
    .tools-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem;max-width:800px;margin:0 auto}
    .tool-card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg);padding:2rem;text-align:center;transition:all .3s ease;cursor:pointer}
    .tool-card:hover{border-color:var(--accent);transform:translateY(-4px);box-shadow:0 8px 25px rgba(56,189,248,.15)}
    .tool-icon{font-size:3rem;margin-bottom:1rem}
    .tool-title{font-size:1.5rem;font-weight:600;margin-bottom:1rem;color:var(--text-main)}
    .tool-desc{color:var(--text-muted);margin-bottom:1.5rem}
    .tool-badge{display:inline-block;background:rgba(34,197,94,.15);color:#4ade80;padding:.25rem .75rem;border-radius:20px;font-size:.8rem;font-weight:600}
    .user-info{display:flex;align-items:center;gap:.5rem;color:var(--text-muted);font-size:.9rem}
    .user-role{background:rgba(56,189,248,.15);color:var(--accent);padding:.2rem .6rem;border-radius:12px;font-size:.8rem;font-weight:600}
    .message{padding:1rem;border-radius:var(--radius-md);margin:1rem 0;text-align:center}
    .message-success{background:rgba(34,197,94,.15);border:1px solid rgba(34,197,94,.3);color:#4ade80}
    .message-error{background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.3);color:#f87171}
    .message-warning{background:rgba(234,179,8,.15);border:1px solid rgba(234,179,8,.3);color:#facc15}
    @media (max-width:768px){.hero h1{font-size:2rem}.hero p{font-size:1rem}.tools-grid{grid-template-columns:1fr}.nav-content{flex-direction:column;gap:1rem}.nav-actions{flex-wrap:wrap;justify-content:center}}
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="nav-brand"><img src="/logo.png" alt="Web3 å¤§èˆªæµ· Logo" class="nav-logo" onerror="this.src='/logo.svg'">Web3 å¤§èˆªæµ·</div>
    <div class="nav-links" id="navActions"></div>
  </nav>
  <div class="container"><div id="messageContainer"></div></div>
  <section class="hero">
    <div class="container">
      <h1>Web3å¤§èˆªæµ·</h1>
      <p>èšåˆæŠ•ç ”å·¥å…·å¹³å° - åŠ©åŠ›æ‚¨åœ¨Web3ä¸–ç•Œçš„æ¢ç´¢ä¹‹æ—…</p>
      <div id="heroActions"></div>
    </div>
  </section>
  <section class="tools-section">
    <div class="container">
      <h2 class="section-title">å·¥å…·æ¨¡å—</h2>
      <div class="tools-grid">
        <div class="tool-card" onclick="navigateToTool('ai-invest')">
          <div class="tool-icon">ğŸ¤–</div>
          <h3 class="tool-title">AI æŠ•ç ”åŠ©æ‰‹</h3>
          <p class="tool-desc">æ™ºèƒ½åˆ†æé¡¹ç›®ï¼Œç”Ÿæˆä¸“ä¸šæŠ•ç ”æŠ¥å‘Šï¼ŒåŠ©æ‚¨åšå‡ºæ›´æ˜æ™ºçš„æŠ•èµ„å†³ç­–</p>
          <span class="tool-badge">ä¼šå‘˜ä¸“å±</span>
        </div>
        <div class="tool-card" style="opacity:.6;cursor:not-allowed">
          <div class="tool-icon">ğŸš€</div>
          <h3 class="tool-title">æ›´å¤šå·¥å…·</h3>
          <p class="tool-desc">æŒç»­å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…...</p>
          <span class="tool-badge">å³å°†æ¨å‡º</span>
        </div>
      </div>
    </div>
  </section>
  <script>
    let currentUser = null;
    async function init(){ await checkAuthStatus(); renderNavigation(); renderHeroSection(); }
    async function checkAuthStatus(){
      try{ const r = await fetch('/api/session'); if (!r.ok) { currentUser=null; return; } const d = await r.json(); currentUser = (d && d.loggedIn) ? (d.user||null) : null; }
      catch(e){ currentUser=null; }
    }
    function renderNavigation(){ const nav=document.getElementById('navActions'); if (!currentUser){ nav.innerHTML = '<a href="/invest.html" class="nav-item">AIæŠ•ç ”åŠ©æ‰‹</a><button class="nav-item" onclick="showLoginModal()">ç™»å½•</button><button class="nav-item" onclick="showRegisterModal()">ç”³è¯·æˆä¸ºä¼šå‘˜</button>'; }
      else { const admin = currentUser.status==='admin' ? '<a href="/admin" class="nav-item">ç®¡ç†åå°</a>' : ''; nav.innerHTML = `<a href="/invest.html" class="nav-item">AIæŠ•ç ”åŠ©æ‰‹</a><div class="user-info"><span>æ¬¢è¿ï¼Œ${currentUser.username}</span><span class="user-role">${getStatusText(currentUser.status)}</span></div>${admin}<button class=\"nav-item logout-btn\" onclick=\"logout()\">é€€å‡ºç™»å½•</button>`; } }
    function renderHeroSection(){ const hero=document.getElementById('heroActions'); if (!currentUser){ hero.innerHTML = '<button class="btn btn-primary" onclick="showRegisterModal()" style="font-size:1.1rem;padding:.75rem 2rem">å¼€å§‹æ¢ç´¢ä¹‹æ—…</button>'; }
      else if (currentUser.status==='pending'){ hero.innerHTML = '<div class="message message-warning">æ‚¨çš„ä¼šå‘˜ç”³è¯·æ­£åœ¨å®¡æ ¸ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…...</div>'; }
      else if (currentUser.status==='member' || currentUser.status==='admin'){ hero.innerHTML = '<div class="message message-success">æ¬¢è¿å›æ¥ï¼æ‚¨å¯ä»¥å¼€å§‹ä½¿ç”¨æ‰€æœ‰å·¥å…·åŠŸèƒ½</div>'; } }
    function getStatusText(s){ const m={pending:'å®¡æ ¸ä¸­',member:'ä¼šå‘˜',admin:'ç®¡ç†å‘˜',blacklisted:'é»‘åå•'}; return m[s]||s; }
    function navigateToTool(p){ if (!currentUser){ showMessage('è¯·å…ˆç™»å½•å¹¶æˆä¸ºä¼šå‘˜','error'); showLoginModal(); return; } if (currentUser.status==='pending'){ showMessage('æ‚¨çš„ä¼šå‘˜ç”³è¯·æ­£åœ¨å®¡æ ¸ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…','warning'); return; } if (currentUser.status==='blacklisted'){ showMessage('æ‚¨çš„è´¦å·å·²è¢«åŠ å…¥é»‘åå•','error'); return; } if (currentUser.status==='member' || currentUser.status==='admin'){ location.href='/' + p; } }
    function showMessage(msg,type){ const c=document.getElementById('messageContainer'); const el=document.createElement('div'); el.className='message message-'+type; el.textContent=msg; c.appendChild(el); setTimeout(()=>{ el.remove(); },5000); }
    function logout(){ fetch('/api/logout',{method:'POST'}).then(()=>{ currentUser=null; renderNavigation(); renderHeroSection(); showMessage('å·²æˆåŠŸé€€å‡ºç™»å½•','success'); }); }
    function showLoginModal(){ const u=prompt('è¯·è¾“å…¥è´¦å·:'); if (!u) return; const p=prompt('è¯·è¾“å…¥å¯†ç :'); if (!p) return; login(u,p); }
    function showRegisterModal(){ const u=prompt('è¯·è¾“å…¥è´¦å· (6-8ä½å­—æ¯æˆ–æ•°å­—):'); if (!u) return; if (!/^[a-zA-Z0-9]{6,8}$/.test(u)){ alert('è´¦å·å¿…é¡»æ˜¯6-8ä½å­—æ¯æˆ–æ•°å­—'); return; } const p=prompt('è¯·è¾“å…¥å¯†ç  (8ä½):'); if (!p) return; if (p.length!==8){ alert('å¯†ç å¿…é¡»æ˜¯8ä½'); return; } register(u,p); }
    async function login(username,password){ try{ const r=await fetch('/api/login',{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({username,password}) }); const d=await r.json(); if (r.ok){ await checkAuthStatus(); renderNavigation(); renderHeroSection(); showMessage('ç™»å½•æˆåŠŸ','success'); } else { showMessage(d.error||'ç™»å½•å¤±è´¥','error'); } } catch(e){ showMessage('ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•','error'); } }
    async function register(username,password){ try{ const r=await fetch('/api/register',{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({username,password}) }); const d=await r.json(); if (r.ok){ showMessage('æ³¨å†ŒæˆåŠŸï¼Œè¯·ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸','success'); } else { showMessage(d.error||'æ³¨å†Œå¤±è´¥','error'); } } catch(e){ showMessage('æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•','error'); } }
    window.addEventListener('load', init);
  </script>
</body>
</html>
