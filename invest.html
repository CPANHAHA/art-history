<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>AIæŠ•ç ”åŠ©æ‰‹ - Web3å¤§èˆªæµ·</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/styles.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¤–</text></svg>">
  <script>
    (function(){
      try{
        const rm = function(){ document.querySelectorAll('script[src*="evmAsk.js"]').forEach(el=>el.remove()); };
        rm();
        const mo = new MutationObserver(rm);
        mo.observe(document.documentElement, { childList:true, subtree:true });
      }catch(e){}
    })();
  </script>
  <style>
    :root { --bg-app:#020617; --bg-card:#1e293b; --bg-sidebar:#0f172a; --text-main:#f1f5f9; --text-muted:#94a3b8; --accent:#38bdf8; --accent-hover:#0ea5e9; --border:#334155; --radius-md:8px; --radius-lg:12px }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:var(--bg-app);color:var(--text-main);height:100vh;overflow:hidden;line-height:1.6}
    .container{max-width:1100px;margin:0 auto;padding:0 20px}
    /* Navbar styles moved to styles.css */
    .btn{padding:.5rem 1rem;border-radius:var(--radius-md);border:1px solid var(--border);background:var(--bg-card);color:var(--text-main);text-decoration:none;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:.5rem}
    .btn:hover{border-color:var(--accent);color:var(--accent)}
    .btn-primary{background:var(--accent);border-color:var(--accent);color:#0b1120}
    .btn-primary:hover{background:var(--accent-hover);color:#000}
    .hero{padding:3rem 0;text-align:center;background:radial-gradient(circle at top right,#1e293b 0%,#020617 40%)}
    .hero h1{font-size:2.4rem;font-weight:700;margin-bottom:.6rem;background:linear-gradient(135deg,var(--accent),#a855f7);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .hero p{font-size:1rem;color:var(--text-muted);max-width:680px;margin:0 auto 1.4rem}
    .card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg);padding:1.25rem;margin:1rem 0}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .field{display:flex;flex-direction:column}
    .field label{font-size:14px;color:var(--text-muted);margin-bottom:6px}
    .field input,.field textarea,.field select{background:transparent;color:var(--text-main);border:1px solid var(--border);border-radius:10px;padding:10px;font-size:15px}
    .section-title{font-size:1.4rem;font-weight:700;margin-bottom:.6rem}
    .actions{margin-top:12px;display:flex;gap:12px;flex-wrap:wrap}
    .preview{margin-top:14px;background:#0b1220;border:1px solid var(--border);border-radius:12px;padding:14px}
    .error{color:#ffb4b4}
    @media (max-width:768px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="nav-brand">
      <img src="/logo.png?v=2" alt="Web3 å¤§èˆªæµ· Logo" class="nav-logo" onerror="this.src='/logo.svg'">
      <span class="brand-text">Web3 å¤§èˆªæµ·</span>
    </div>
    <div class="nav-links" id="navActions"></div>
  </nav>
  
  <!-- Use .main-content for visual layering and spacing -->
  <div class="main-content">
    <iframe id="geminiFrame" src="/ai-gemini-v4.html" style="width:100%; height:100%; border:0; border-radius: 12px; background:#0b1220"></iframe>
  </div>

  <script>
    (async function(){
      try{
        const r = await fetch('/api/session');
        const d = await r.json();
        const ok = d && d.loggedIn && d.user && (d.user.status==='member' || d.user.status==='admin');
        if (!ok){ alert('ä»…ä¼šå‘˜æˆ–ç®¡ç†å‘˜å¯è®¿é—® AI æŠ•ç ”åŠ©æ‰‹'); location.href='/'; return; }
        const nav=document.getElementById('navActions');
        const admin = (d.user.status==='admin') ? '<a href="/admin" class="nav-item">ç®¡ç†åå°</a>' : '';
        nav.innerHTML = '<a href="/" class="nav-item">è¿”å›ä¸»é¡µ</a>' + admin + '<button class="nav-item logout-btn" onclick="logout()">é€€å‡ºç™»å½•</button>';
      }catch(e){ location.href='/'; }
    })();
    function logout(){ fetch('/api/logout',{method:'POST'}).then(()=>{ location.href='/'; }); }
  </script>
</body>
</html>
